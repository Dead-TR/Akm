(this.webpackJsonpakm=this.webpackJsonpakm||[]).push([[0],{21:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var i=a(5),r=a(15),s=(a(21),a(7)),n=a.n(s),c=a(1),o=a(2),l=a(8),h=a(13),d=a(10);function u(e,t,a,i){var r=this.make.tilemap({key:t,tileHeight:i,tileWidth:i}),s=e?r.addTilesetImage(a,void 0,i,i):null;return r.createStaticLayer(0,s,0,0)}var m=function(){function e(t,a,i,r,s){Object(c.a)(this,e),this.world=void 0,this.scene=void 0,this.objects=void 0,this.scene=t,this.world=u.call(t,a,i,r,s),this.objects={}}return Object(o.a)(e,[{key:"addSimpleObjects",value:function(e){var t=this;e.forEach((function(e){var a=e.x,i=e.y,r=e.imgName,s=e.name;t.objects[s]=t.scene.add.image(a,i,r)}))}}]),e}();function p(e,t,a,i){return new m(this,e,t,a,i)}var f=a(11);function y(e){var t=this;e.forEach((function(e){var a=e.method;e.data.forEach((function(e){var i;(i=t.load)[a].apply(i,Object(f.a)(e))}))}))}var b=a(12),v=a(16),g=a(4);function j(e){var t=this;e.forEach((function(e){var a=e.key,i=e.frame;t.anims.create({key:a,frames:t.anims.generateFrameNumbers(i.name,i.ways),frameRate:i.frameRate,repeat:i.repeat})}))}var O,k=function(){function e(t,a,i,r,s,n){var o;(Object(c.a)(this,e),this.actor=void 0,this.scene=void 0,this.collision={top:{calc:-15,blocked:!1},bottom:{calc:15,blocked:!1},left:{calc:-15,blocked:!1},right:{calc:15,blocked:!1}},this.scene=t,this.actor=t.physics.add.sprite(a,i,r,s),n)&&(o=this.actor).setOrigin.apply(o,Object(f.a)(n))}return Object(o.a)(e,[{key:"addAnimation",value:function(e){j.call(this.scene,e)}},{key:"checkCollision",value:function(e,t,a,i){for(var r=0,s=Object.entries(this.collision);r<s.length;r++){var n,c=Object(b.a)(s[r],2),o=c[0],l=c[1],h="top"===o||"bottom"===o?"y":"x",d=null===(n=a.getTileAtWorldXY("x"===h?e+l.calc:e,"y"===h?t+l.calc:t,!1))||void 0===n?void 0:n.index,u=i.indexOf(d||0);l.blocked=!u||-1!==u}}},{key:"move",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,r=this.actor.x-e<-i?"right":this.actor.x-e>i?"left":"stop",s=this.actor.y-t<-i?"bottom":this.actor.y-t>i?"top":"stop";return"right"===r?this.actor.setVelocityX(a):"left"===r?this.actor.setVelocityX(-a):this.actor.setVelocityX(0),"bottom"===s?this.actor.setVelocityY(a):"top"===s?this.actor.setVelocityY(-a):this.actor.setVelocityY(0),[r,s]}}]),e}();function w(e,t,a,i,r){return new x(this,e,t,a,i,r)}!function(e){e.left="playerGoLeft",e.right="playerGoRight",e.top="playerGoUp",e.bottom="playerGoDown"}(O||(O={}));var x=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e,i,r,s,n,o){var l;return Object(c.a)(this,a),(l=t.call(this,e,i,r,s,n,o)).scene=void 0,l.isCollisionCreated=!1,l.scene=e,l}return Object(o.a)(a,[{key:"move",value:function(e,t,i){this.checkCollision(this.actor.x,this.actor.y,t,i);var r=e.x-this.actor.x,s=e.y-this.actor.y,n=e.x,c=e.y;this.collision.right.blocked?r>0&&(n=this.actor.x):this.collision.left.blocked&&r<0&&(n=this.actor.x),this.collision.bottom.blocked?s>0&&(c=this.actor.y):this.collision.top.blocked&&s<0&&(c=this.actor.y);var o,l=Object(v.a)(Object(g.a)(a.prototype),"move",this).call(this,n,c,100,5),h=Object(b.a)(l,2),d=h[0],u=h[1];if("stop"!==d)this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(o=this.actor.anims.currentAnim)||void 0===o?void 0:o.key)!==O[d]&&this.actor.anims.play(O[d]);else if("stop"!==u){var m;this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(m=this.actor.anims.currentAnim)||void 0===m?void 0:m.key)!==O[u]&&this.actor.anims.play(O[u])}else{var p;this.actor.anims.pause(null===(p=this.actor.anims.currentAnim)||void 0===p?void 0:p.frames[1])}return l}}]),a}(k);function G(e,t){var a=this.cameras.main;return a.setBounds(0,0,Number(t.width),Number(t.height)).startFollow(e,!0,1,1,0,0),a}function S(e,t,a,i,r,s,n){var c=this,o=this.add.circle(e,t,a,r);if(s){var l=s.color,h=s.size;o.setStrokeStyle(h,l)}var d=this.tweens.add({delay:.1,targets:o,scale:i,yoyo:!1,repeat:0,alpha:0,ease:"Sine.easeInOut"});return this.input.on("pointerdown",(function(){var e=0,t=0;n&&(e=n.scrollX,t=n.scrollY),o.x=c.input.x+e,o.y=c.input.y+t,d.restart()})),o}var A=function(){function e(t){Object(c.a)(this,e),this.scene=void 0,this.create=void 0,this.load=void 0,this.scene=t,this.create={world:p.bind(this.scene),player:w.bind(this.scene),animation:j.bind(this.scene),camera:G.bind(this.scene),ui:{cursor:S.bind(this.scene)}},this.load={preload:y.bind(this.scene)}}return Object(o.a)(e,[{key:"addListeners",value:function(e,t){this.scene.input.on(e,t)}}]),e}(),L=a(0),D={ways:{start:0,end:3},frameRate:6,repeat:-1},E=[{key:"playerGoUp",frame:Object(L.a)(Object(L.a)({},D),{},{name:"playerUp"})},{key:"playerGoDown",frame:Object(L.a)(Object(L.a)({},D),{},{name:"playerDown"})},{key:"playerGoLeft",frame:Object(L.a)(Object(L.a)({},D),{},{name:"playerLeft"})},{key:"playerGoRight",frame:Object(L.a)(Object(L.a)({},D),{},{name:"playerRight"})}],R=[0,2,3,4,5,7,8,9,10],V=[],C={frame:{frameWidth:20,frameHeight:45,startFrame:0,endFrame:3},path:"game/assets/img/DefaultScene/characters/player/"},U=[{method:"image",data:[["exampleGrassTile","game/assets/img/DefaultScene/grass.png"],["cursor","game/assets/img/general/cursor.png"],["empty","game/assets/img/general/emptyLayers.png"]]},{method:"tilemapCSV",data:[["exampleGrid","game/assets/grids/DefaultScene/grass.csv"]]},{method:"spritesheet",data:[["playerLeft","".concat(C.path,"p_left.png"),C.frame],["playerRight","".concat(C.path,"p_right.png"),C.frame],["playerDown","".concat(C.path,"p_down.png"),Object(L.a)(Object(L.a)({},C.frame),{},{frameHeight:44})],["playerUp","".concat(C.path,"p_up.png"),Object(L.a)(Object(L.a)({},C.frame),{},{frameHeight:44,frameWidth:19})]]}],N=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).engine=void 0,i.player=void 0,i.world=void 0,i.state=void 0,i.engine=new A(Object(l.a)(i)),i.state={},i}return Object(o.a)(a,[{key:"preload",value:function(){this.engine.load.preload(U)}},{key:"create",value:function(){this.world=this.engine.create.world(!0,"exampleGrid","exampleGrassTile",32),this.world.addSimpleObjects(V),this.player=this.engine.create.player(64,64,"playerUp",1,[.5,.8]),this.player.addAnimation(E),this.state.camera=this.engine.create.camera(this.player.actor,this.world.world),this.state.cursor=this.engine.create.ui.cursor(100,100,1,25,16777215,null,this.state.camera),this.engine.addListeners("pointerup",(function(){}))}},{key:"update",value:function(){this.player.move(this.state.cursor,this.world.world,R)}}]),a}(s.Scene),T={type:Phaser.AUTO,parent:"game-box",width:480,height:480,scene:[N],backgroundColor:1310779,physics:{default:"arcade",arcade:{}}},X=a(3),Y=null,F=function(){return Object(i.useLayoutEffect)((function(){Y=new n.a.Game(T)}),[]),Object(i.useEffect)((function(){return function(){var e;null===(e=Y)||void 0===e||e.destroy(!0,!0)}}),[]),Object(X.jsx)("div",{children:Object(X.jsx)("div",{id:"game-box"})})};var H=function(){return Object(X.jsx)("div",{className:"App",children:Object(X.jsx)(F,{})})};a(24);Object(r.render)(Object(X.jsx)(H,{}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.1ac31d2b.chunk.js.map