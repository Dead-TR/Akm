(this.webpackJsonpakm=this.webpackJsonpakm||[]).push([[0],{22:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var i=a(7),n=a(17),r=(a(22),a(8)),s=a.n(r),o=a(1),c=a(2),l=a(3),h=a(13),m=a(10),d=a(9),u=a(14),p=a(4),y=a(6),v={health:16711680},f={health:{width:30,height:5}},b=function(){function e(t,a,i,n,r,s){var l;(Object(c.a)(this,e),this.actor=void 0,this.scene=void 0,this.animations=void 0,this.params={health:100,armor:10,attack:10,speed:100,coolDown:5},this.elements={healthLine:null},this.mortal={sword:null,enemy:null,target:{},fight:{health:100,coolDown:50}},this.collision={top:{calc:-15,blocked:!1},bottom:{calc:15,blocked:!1},left:{calc:-15,blocked:!1},right:{calc:15,blocked:!1}},this.scene=t,this.actor=t.physics.add.sprite(a,i,n,r),s.origin)&&(l=this.actor).setOrigin.apply(l,Object(o.a)(s.origin))}return Object(l.a)(e,[{key:"setDeath",value:function(){var e,t;null===(e=this.mortal.sword)||void 0===e||e.destroy(),this.actor.x=-1e3,this.actor.destroy(),null===(t=this.elements.healthLine)||void 0===t||t.destroy(),this.mortal.enemy&&(this.mortal.enemy.mortal.enemy=null)}},{key:"mortalAnimationPlay",value:function(e){!this.animations||this.mortal.fight.health<=0||(e?this.mortal.sword&&this.mortal.sword.active?(this.mortal.sword.x=this.actor.x,this.mortal.sword.y=this.actor.y,this.mortal.sword.setDepth(this.actor.depth+1)):(this.mortal.sword=this.scene.add.sprite(this.actor.x,this.actor.y,"").setOrigin(this.actor.originX,this.actor.originY),this.mortal.sword.play(this.animations.sword)):this.mortal.sword&&(this.mortal.sword.destroy(),this.mortal.sword=null))}},{key:"mortalCalculate",value:function(e){if(e&&!(this.mortal.fight.health<=0)){if(this.elements.healthLine){var t=this.mortal.fight.health/this.params.health;this.elements.healthLine.scaleX=t}if(this.mortal.fight.coolDown===this.params.coolDown){this.mortal.fight.coolDown--;var a=this.params.attack-e.params.armor;e.mortal.fight.health-=a>0?a:0}else this.mortal.fight.coolDown--,this.mortal.fight.coolDown<0&&(this.mortal.fight.coolDown=this.params.coolDown);var i;if(e.mortal.fight.health<=0)e.setDeath(),this.mortal.enemy=null,null===(i=this.mortal.sword)||void 0===i||i.destroy(),this.mortal.sword=null}}},{key:"checkCollision",value:function(e,t,a){for(var i=this,n=function(){var n,o=Object(y.a)(s[r],2),c=o[0],l=o[1],h="top"===c||"bottom"===c?"y":"x",m={x:"x"===h?i.actor.x+l.calc:i.actor.x,y:"y"===h?i.actor.y+l.calc:i.actor.y},d=null===(n=e.getTileAtWorldXY(m.x,m.y,!1))||void 0===n?void 0:n.index,u=t.indexOf(d||0);l.blocked=!u||-1!==u,a&&a.characters&&a.characters.forEach((function(e){if(e.actor!==i.actor&&e.actor.active){var t=e.actor.x<=m.x+7&&e.actor.x>=m.x-7,a=e.actor.y<=m.y+7&&e.actor.y>=m.y-7;t&&a&&(l.blocked||(l.blocked=!0))}}))},r=0,s=Object.entries(this.collision);r<s.length;r++)n()}},{key:"createCollision",value:function(e){this.collision.right.blocked?e.direction.x>0&&(e.coordinates.x=this.actor.x):this.collision.left.blocked&&e.direction.x<0&&(e.coordinates.x=this.actor.x),this.collision.bottom.blocked?e.direction.y>0&&(e.coordinates.y=this.actor.y):this.collision.top.blocked&&e.direction.y<0&&(e.coordinates.y=this.actor.y)}},{key:"move",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(this.elements.healthLine&&(this.elements.healthLine.x=this.actor.x,this.elements.healthLine.y=this.actor.y),this.mortal.fight.health<=0)return["stop","stop"];var n=this.actor.x-e<-i?"right":this.actor.x-e>i?"left":"stop",r=this.actor.y-t<-i?"bottom":this.actor.y-t>i?"top":"stop";return"right"===n?this.actor.setVelocityX(a):"left"===n?this.actor.setVelocityX(-a):this.actor.setVelocityX(0),"bottom"===r?this.actor.setVelocityY(a):"top"===r?this.actor.setVelocityY(-a):this.actor.setVelocityY(0),[n,r]}},{key:"createHealth",value:function(){var e=this.scene.add.graphics({x:this.actor.x,y:this.actor.y});e.lineStyle(f.health.height,v.health);var t=-1*f.health.height-this.actor.height*this.actor.originY;e.beginPath(),e.moveTo(f.health.width/2*-1,t),e.lineTo(f.health.width/2,t),e.closePath(),e.strokePath(),e.setDepth(this.actor.depth+2),this.elements.healthLine=e}},{key:"movementAnimation",value:function(e,t){if(t&&!(this.mortal.fight.health<=0))try{var a,i=Object(y.a)(e,2),n=i[0],r=i[1];if("stop"!==n)this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(a=this.actor.anims.currentAnim)||void 0===a?void 0:a.key)!==t[n]&&this.actor.anims.play(t[n]);else if("stop"!==r){var s;this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(s=this.actor.anims.currentAnim)||void 0===s?void 0:s.key)!==t[r]&&this.actor.anims.play(t[r])}else{var o;this.actor.anims.pause(null===(o=this.actor.anims.currentAnim)||void 0===o?void 0:o.frames[1])}}catch(c){this.actor.anims.pause()}}}]),e}();function g(e,t,a,i,n,r){return new k(this,e,t,a,i,n,r)}var k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e,i,n,r,s,o,l){var h;return Object(c.a)(this,a),(h=t.call(this,e,i,n,r,s,{origin:null===l||void 0===l?void 0:l.origin,animations:o})).scene=void 0,h.visionDistance=100,h.animations=void 0,h.scene=e,h.visionDistance=(null===l||void 0===l?void 0:l.vision)||h.visionDistance,h.animations=o,(null===l||void 0===l?void 0:l.char)&&(h.params=l.char),h.createHealth(),h}return Object(l.a)(a,[{key:"watching",value:function(e,t){var i=this,n=void 0;if(n||(n=e.find((function(e){var t=Math.abs(e.actor.x-i.actor.x),a=Math.abs(e.actor.y-i.actor.y);return t<i.visionDistance&&a<i.visionDistance}))),n){this.visionDistance=1/0;var r={direction:{x:n.actor.x-this.actor.x,y:n.actor.y-this.actor.y},coordinates:{x:n.actor.x,y:n.actor.y}};t&&(this.checkCollision(this.scene.world.world,t,{characters:this.scene.enemy}),this.createCollision(r));var s=Object(u.a)(Object(p.a)(a.prototype),"move",this).call(this,r.coordinates.x,r.coordinates.y,this.params.speed,15);if(this.animations.movement){var o=this.animations.movement;this.movementAnimation(s,o)}var c,l=Math.abs(r.direction.x)<=14&&Math.abs(r.direction.y)<=14;if(this.mortalAnimationPlay(l),l)this.mortalCalculate(n),n.mortal.enemy||(n.mortal.enemy=this);else(null===(c=n.mortal.enemy)||void 0===c?void 0:c.actor)===this.actor&&(n.mortal.enemy=null)}}}]),a}(b),w=a(0);function O(e,t,a,i,n){return new j(this,e,t,a,i,n)}var j=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e,i,n,r,s,o){var l,h;return Object(c.a)(this,a),(h=t.call(this,e,i,n,r,s,{origin:null===o||void 0===o?void 0:o.origin,animations:o.animation})).scene=void 0,h.inventory=void 0,h.skills={health:10,armor:0,attack:1,coolDown:20,speed:100},h.portrait=void 0,h.scene=e,h.animations=o.animation,h.params=Object(w.a)({},h.skills),h.inventory=e.engine.create.inventory({img:"uiInventory"}),h.portrait=e.add.sprite(0,0,"playerPortrait").setOrigin(0,0).setScrollFactor(0),(null===(l=h.scene.engine.layers)||void 0===l?void 0:l.ui)&&h.inventory.elements.uiButton&&(h.scene.engine.layers.ui.add(h.inventory.elements.uiButton),h.scene.engine.layers.ui.add(h.portrait)),h}return Object(l.a)(a,[{key:"move",value:function(e,t,i){var n;this.checkCollision(t,i);var r={direction:{x:e.x-this.actor.x,y:e.y-this.actor.y},coordinates:{x:e.x,y:e.y}};this.createCollision(r);var s=Object(u.a)(Object(p.a)(a.prototype),"move",this).call(this,r.coordinates.x,r.coordinates.y,this.params.speed,5);return this.movementAnimation(s,null===(n=this.animations)||void 0===n?void 0:n.movement),this.mortalAnimationPlay(!!this.mortal.enemy),this.mortal.enemy&&this.mortalCalculate(this.mortal.enemy),s}}]),a}(b);function x(e,t,a,i){var n=this.make.tilemap({key:t,tileHeight:i,tileWidth:i}),r=e?n.addTilesetImage(a,void 0,i,i):null;return n.createStaticLayer(0,r,0,0)}var I=function(){function e(t,a,i,n,r){Object(c.a)(this,e),this.world=void 0,this.scene=void 0,this.objects=void 0,this.scene=t,this.world=x.call(t,a,i,n,r),this.objects={}}return Object(l.a)(e,[{key:"addSimpleObjects",value:function(e){var t=this;e.forEach((function(e){var a=e.x,i=e.y,n=e.imgName,r=e.name;t.objects[r]=t.scene.add.image(a,i,n)}))}}]),e}();function D(e,t,a,i){return new I(this,e,t,a,i)}var B=a(16),E=[{img:"inventoryElement_1",name:"item",slot:"body",picked:!1,price:10,params:{defence:20,attack:10,hp:5,speed:50},message:"test"},{img:"inventoryElement_2",name:"item2",slot:"arm",picked:!1,price:10,params:{defence:0,attack:150,hp:0,speed:510}}];function S(e,t,a){var i=e.add.graphics();return i.lineStyle(2,1150643),i.strokeRect(0,0,40,40),i.x=t,i.y=a,i}function L(e,t,a,i){var n=[];console.log("t>",n,a);for(var r=function(r){if(r>t.length-1)return"break";var s=a[r],o={x:t[r].x+3,y:t[r].y+3},c=e.add.sprite(o.x,o.y,s.img).setOrigin(0,0).setScrollFactor(0).setInteractive();s.picked&&c.setTint(8912715),c.params=s,c.on("pointerdown",(function(){i(c),console.log("item click",r)})),n.push(c)},s=0;s<a.length;s++){if("break"===r(s))break}return n}var z=function(e){e.forEach((function(e){e.destroy()})),e.length=0},P=function(e,t,a){var i=Number(e.game.config.width)-50-30,n=100+60*a,r="";switch(t){default:case"open":r="barterButton";break;case"move":r="moveButton";break;case"pick":r="pickButton"}return e.add.sprite(i,n,r).setOrigin(1,.5).setInteractive().setScrollFactor(0)},A=function(e){Object.values(e).forEach((function(e){e.setText("")}))};function _(e){var t=this;if(this.checkedItem=e,e){this.frame.setPosition(null===e||void 0===e?void 0:e.x,e.y);var a=e.params.params;if(a){A(this.showItemParamElements);var i=Object.entries(a),n=1;i.forEach((function(e){if(e&&e[1]){var a=Object(y.a)(e,2),i=a[0],r=a[1],s=i,o=t.showItemParamElements[s];o&&(o.y=300+o.height*n++,o.setText(function(e,t){switch(e){case"attack":return"attack: ".concat(t);case"defence":return"defence: ".concat(t);case"hp":return"hp: ".concat(t);case"speed":return"speed: ".concat(t);default:return""}}(s,r)))}}))}}}function C(e,t,a){for(var i in t){var n=t[i],r=e.params,s=e.skills;switch(i){case"attack":r.attack="clear"!==a&&n?n:s.attack;break;case"defence":r.armor="clear"!==a&&n?n:s.armor;break;case"hp":r.health="clear"!==a&&n?n:s.health;break;case"speed":r.speed="clear"!==a&&n?n:s.speed;break;case"coolDown":r.coolDown="clear"!==a&&n?n:s.coolDown}}}function T(e){return new F(this,e)}var F=function(){function e(t,a){var i,n,r,s,l=this;Object(c.a)(this,e),this.scene=void 0,this.elements=void 0,this.list=[],this.checkedItem=null,this.showItemParamElements=void 0,this.frame=void 0,this.inventoryStatus="close",this.allItems=E.map((function(e,t){return Object(w.a)(Object(w.a)({},e),{},{id:t})})),this.cells=void 0,this.inventoryContainer=void 0,this.displayedItems=void 0,this.pickButton=null,this.barterButton=null,this.barterMoveButton=null;var h=t.game.config,m=h.width,d=h.height;this.scene=t,this.list[0]=(r=n=Object(w.a)({},this.allItems[0]),Object(B.a)(r),this.list[2]=Object.assign({},n),s=i=n,Object(B.a)(s),this.list[1]=Object.assign({},i),i),this.inventoryContainer=t.add.container(0,0).setScrollFactor(0),this.frame=t.add.sprite(-100,-100,"frame").setOrigin(0,0);var u={w:Number(m),h:Number(d)};this.showItemParamElements=function(){var e={};return["coolDown","defence","attack","speed","hp"].forEach((function(a){var i=t.add.text(u.w-30,300,"").setOrigin(1,.5);e[a]=i})),e}();var p=t.make.graphics({}),y=p.createGeometryMask(),v=this.inventoryContainer,f=t.add.sprite(u.w/2,u.h/2,"inventoryBG").setOrigin(.5).setInteractive().on("pointerdown",(function(){return null}));this.cells=function(e){for(var t=[],a=0,i=1;i<=40;i++){var n=50;switch(i%5){case 1:n*=1,a++;break;case 0:n*=5;break;default:n*=i%5}t.push(S(e,n,50*a))}return t}(t),p.fillRect(15,15,u.w-30,u.h-30).setScrollFactor(0);var b=Object.values(this.showItemParamElements);v.add([f].concat(Object(o.a)(this.cells),Object(o.a)(b),[this.frame])).setMask(y).setAlpha(0),this.elements={background:f,container:v,mask:y},this.elements.uiButton=t.add.sprite(u.w,0,a.img),this.elements.uiButton.setOrigin(1,0).setScrollFactor(0).setInteractive(),this.elements.uiButton.on("pointerdown",(function(){switch(l.inventoryStatus){case"close":l.openInventory();break;case"open":case"barter":l.closeInventory()}}))}return Object(l.a)(e,[{key:"openInventory",value:function(){var e=this;this.inventoryStatus="open",this.pickButton=P(this.scene,"pick",0).setAlpha(1),this.displayedItems=L(this.scene,this.cells,this.list,_.bind(this)),this.inventoryContainer.add([].concat(Object(o.a)(this.displayedItems),[this.pickButton])),this.elements.container.setAlpha(1),this.pickButton.on("pointerup",(function(){var t=e.scene.player;if(console.log("\ud83d\ude80 ~ file: index.ts ~ line 154 ~ Inventory ~ this.pickButton.on ~ player",t),e.checkedItem){var a=e.checkedItem.params.slot;e.displayedItems.forEach((function(i){var n;i.params.slot===a&&i.params!==(null===(n=e.checkedItem)||void 0===n?void 0:n.params)&&(i.params.picked=!1,i.clearTint(),i.params.params&&C(t,i.params.params,"clear"))})),e.checkedItem.params.picked=!e.checkedItem.params.picked,e.checkedItem.params.picked?e.checkedItem.setTint(8912715):e.checkedItem.clearTint();var i={attack:t.skills.attack,defence:t.skills.armor,hp:t.skills.health,speed:t.skills.speed,coolDown:t.skills.coolDown};e.list.forEach((function(e){if(e.picked)for(var t in e.params){var a=e.params[t];i[t]?i[t]+=a:i[t]=a}})),C(t,i,"set")}}))}},{key:"openBarter",value:function(e,t){var a,i=this;null===(a=this.elements.uiButton)||void 0===a||a.setTexture("uiInventoryBox");var n="box";this.inventoryStatus="barter",this.displayedItems=L(this.scene,this.cells,e,_.bind(this)),this.barterButton=P(this.scene,"open",0).setAlpha(1),this.barterMoveButton=P(this.scene,"move",1).setAlpha(1),this.barterButton.setDepth(this.inventoryContainer.length).on("pointerup",(this.scene,function(){var t,a,r;switch(i.checkedItem=null,A(i.showItemParamElements),i.frame.setPosition(-100,-100),n){case"player":null===(t=i.elements.uiButton)||void 0===t||t.setTexture("uiInventoryBox"),z(i.displayedItems),i.displayedItems=L(i.scene,i.cells,e,_.bind(i)),i.inventoryContainer.add(Object(o.a)(i.displayedItems)),n="box";break;case"box":null===(a=i.elements.uiButton)||void 0===a||a.setTexture("uiInventory"),z(i.displayedItems),i.displayedItems=L(i.scene,i.cells,i.list,_.bind(i)),i.inventoryContainer.add(Object(o.a)(i.displayedItems)),n="player";break;default:null===(r=i.elements.uiButton)||void 0===r||r.setTexture("uiInventory")}})),this.barterMoveButton.setDepth(this.inventoryContainer.length).on("pointerup",(this.scene,function(){setTimeout((function(){switch(n){case"player":if(i.checkedItem&&!i.checkedItem.params.picked){var a=Object(o.a)(e),r=i.list.filter((function(e,t){return i.displayedItems[t]!==i.checkedItem}));z(i.displayedItems),i.list=r,i.displayedItems=L(i.scene,i.cells,r,_.bind(i)),i.inventoryContainer.add(Object(o.a)(i.displayedItems)),a.push(i.checkedItem.params),i.checkedItem=null,i.frame.setPosition(-100,-100),A(i.showItemParamElements),t(a)}break;case"box":if(i.checkedItem){var s=e.filter((function(e,t){return i.displayedItems[t]!==i.checkedItem}));z(i.displayedItems),t(s),i.displayedItems=L(i.scene,i.cells,s,_.bind(i)),i.inventoryContainer.add(Object(o.a)(i.displayedItems)),i.list.push(i.checkedItem.params),i.checkedItem=null,i.frame.setPosition(-100,-100),A(i.showItemParamElements)}}}),0)})),this.inventoryContainer.add(Object(o.a)(this.displayedItems)),this.elements.container.setAlpha(1)}},{key:"closeInventory",value:function(){var e,t,a,i;null===(e=this.elements.uiButton)||void 0===e||e.setTexture("uiInventory"),this.inventoryStatus="close",z(this.displayedItems),null===(t=this.pickButton)||void 0===t||t.destroy(),null===(a=this.barterButton)||void 0===a||a.destroy(),null===(i=this.barterMoveButton)||void 0===i||i.destroy(),this.checkedItem=null,this.frame.setPosition(-100,-100),A(this.showItemParamElements),this.elements.container.setAlpha(0),console.log("plaeyer",this.scene.player)}},{key:"createBox",value:function(e,t,a,i){var n=this,s=[];if(i){var c=i.random,l=i.search;if(c)for(var h=0;h<c;h++){var m=this.allItems[r.Math.Between(0,this.allItems.length-1)];s.push(Object(w.a)({},m))}l&&l.forEach((function(e){var t=n.allItems[e];s.push(Object(w.a)({},t))}))}var d=this.scene.add.sprite(e,t,a).setInteractive().on("pointerdown",(function(){var e=n.scene.player;if(Math.abs(e.actor.x-d.x)<60&&Math.abs(e.actor.y-d.y)<60&&!e.mortal.enemy){n.openBarter(s,(function(e){s.length=0,s.push.apply(s,Object(o.a)(e))}))}}));return{img:d,list:s}}}]),e}();function G(e){var t=this;e.forEach((function(e){var a=e.key,i=e.frame;t.anims.create({key:a,frames:t.anims.generateFrameNumbers(i.name,i.ways),frameRate:i.frameRate,repeat:i.repeat})}))}function R(e,t){var a=this.cameras.main;return a.setBounds(0,0,Number(t.width),Number(t.height)).startFollow(e,!0,1,1,0,0),a}function M(e,t,a,i,n,r,s){var o=this,c=this.add.circle(e,t,a,n);if(r){var l=r.color,h=r.size;c.setStrokeStyle(h,l)}var m=this.tweens.add({delay:.1,targets:c,scale:i,yoyo:!1,repeat:0,alpha:0,ease:"Sine.easeInOut"});return this.input.on("pointerdown",(function(e,t){if(!t.length){var a=0,i=0;s&&(a=s.scrollX,i=s.scrollY),c.x=o.input.x+a,c.y=o.input.y+i,m.restart()}})),c}function H(e){var t=this;e.forEach((function(e){var a=e.method;e.data.forEach((function(e){var i;(i=t.load)[a].apply(i,Object(o.a)(e))}))}))}function U(e){Object(o.a)(e).sort((function(e,t){return e.actor.y-t.actor.y})).forEach((function(e,t){var a;e.actor.setDepth(t),null===(a=e.elements.healthLine)||void 0===a||a.setDepth(t+1)}))}function N(){return{ui:this.add.layer().setDepth(2),gameElements:{characters:this.add.layer().setDepth(1)}}}function W(e,t){e.forEach((function(e){var a=e.actor,i=e.elements;t.add(a),(null===i||void 0===i?void 0:i.healthLine)&&t.add(i.healthLine)}))}function V(e,t){var a=[];Array.isArray(e)?a.push.apply(a,Object(o.a)(e)):a.push(e),a.forEach((function(e){return t.add(e)}))}var X=function(){function e(t){Object(c.a)(this,e),this.scene=void 0,this.load=void 0,this.create=void 0,this.update=void 0,this.layers=void 0,this.scene=t,this.load={preload:H.bind(this.scene),animation:G.bind(this.scene)},this.create={world:D.bind(this.scene),player:O.bind(this.scene),enemy:g.bind(this.scene),animation:G.bind(this.scene),camera:R.bind(this.scene),inventory:T.bind(this.scene),layers:N.bind(this.scene),addToLayer:{characters:W.bind(this.scene),sprites:V.bind(this.scene)},ui:{cursor:M.bind(this.scene)}},this.update={check:{characterZIndex:U.bind(this.scene)}}}return Object(l.a)(e,[{key:"addListeners",value:function(e,t){this.scene.input.on(e,t)}}]),e}();var Y={ways:{start:0,end:3},frameRate:6,repeat:-1},J={ways:{start:0,end:22},frameRate:15,repeat:-1},Z=[{key:"playerGoUp",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"playerUp"})},{key:"playerGoDown",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"playerDown"})},{key:"playerGoLeft",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"playerLeft"})},{key:"playerGoRight",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"playerRight"})},{key:"zombieU",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"zombieUp"})},{key:"zombieD",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"zombieDown"})},{key:"zombieL",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"zombieLeft"})},{key:"zombieR",frame:Object(w.a)(Object(w.a)({},Y),{},{name:"zombieRight"})},{key:"clawsFight",frame:Object(w.a)(Object(w.a)({},J),{},{name:"claws"})},{key:"sword_1Fight",frame:Object(w.a)(Object(w.a)({},J),{},{name:"sword_1"})}],q=[0,2,3,4,5,7,8,9,10],K=[{name:"zombie",config:{x:250,y:510,spriteSheet:"zombieDown",textureFrame:1,origin:[.5,.8]},animations:{movement:{top:"zombieU",bottom:"zombieD",left:"zombieL",right:"zombieR"},sword:"clawsFight"}}];var Q=[],$={frame:{frameWidth:20,frameHeight:45,startFrame:0,endFrame:3},player:"game/assets/img/DefaultScene/characters/player/",zombie:"game/assets/img/DefaultScene/characters/enemies/zombie/"},ee={path:"".concat("game/assets/img/DefaultScene/effects/","fight/"),claws:{name:"claws.png",frame:{frameWidth:80,frameHeight:80,startFrame:0,endFrame:22}},sword_1:{name:"sword_1.png",frame:{frameWidth:80,frameHeight:80,startFrame:0,endFrame:23}}},te="game/assets/",ae=[{method:"image",data:[["exampleGrassTile",te+"img/DefaultScene/grass.png"],["frame",te+"img/general/frame.png"],["empty",te+"img/general/emptyLayers.png"],["inventoryBox",te+"img/general/items/box.png"],["inventoryElement_1",te+"img/general/items/body/1.png"],["inventoryElement_2",te+"img/general/items/arm/1.png"],["inventoryBG",te+"img/general/ui/inventoryBG.png"],["uiInventory",te+"img/general/ui/inventory.png"],["uiInventoryBox",te+"img/general/ui/box.png"],["barterButton",te+"img/general/b_button.png"],["moveButton",te+"img/general/to_button.png"],["pickButton",te+"img/general/pick_button.png"],["playerPortrait",te+"img/DefaultScene/portraits/player.jpg"]]},{method:"tilemapCSV",data:[["exampleGrid",te+"grids/DefaultScene/grass.csv"]]},{method:"spritesheet",data:[["playerLeft","".concat($.player,"p_left.png"),$.frame],["playerRight","".concat($.player,"p_right.png"),$.frame],["playerDown","".concat($.player,"p_down.png"),Object(w.a)(Object(w.a)({},$.frame),{},{frameHeight:44})],["playerUp","".concat($.player,"p_up.png"),Object(w.a)(Object(w.a)({},$.frame),{},{frameHeight:44,frameWidth:19})],["zombieLeft","".concat($.zombie,"p_left.png"),Object(w.a)(Object(w.a)({},$.frame),{},{frameHeight:41,frameWidth:22})],["zombieRight","".concat($.zombie,"p_right.png"),Object(w.a)(Object(w.a)({},$.frame),{},{frameHeight:41,frameWidth:22})],["zombieUp","".concat($.zombie,"p_up.png"),$.frame],["zombieDown","".concat($.zombie,"p_down.png"),$.frame],["claws","".concat(ee.path).concat(ee.claws.name),ee.claws.frame],["sword_1","".concat(ee.path).concat(ee.sword_1.name),ee.sword_1.frame]]}],ie=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).engine=void 0,i.player=void 0,i.world=void 0,i.enemy=[],i.state=void 0,i.engine=new X(Object(h.a)(i)),i.state={},i}return Object(l.a)(a,[{key:"preload",value:function(){this.engine.load.preload(ae)}},{key:"create",value:function(){var e;this.engine.layers=this.engine.create.layers(),this.engine.load.animation(Z),this.world=this.engine.create.world(!0,"exampleGrid","exampleGrassTile",32),this.world.addSimpleObjects(Q),this.player=this.engine.create.player(64,64,"playerUp",1,{origin:[.5,.8],animation:{movement:{left:"playerGoLeft",right:"playerGoRight",top:"playerGoUp",bottom:"playerGoDown"},sword:"sword_1Fight"},inventory:"uiInventory"}),this.player.inventory.createBox(300,100,"inventoryBox",{random:10}),e=this,K.forEach((function(t){t.name;var a=t.config,i=t.animations;e.enemy.push(e.engine.create.enemy(a.x,a.y,a.spriteSheet,a.textureFrame,i,{origin:a.origin,vision:150,speed:100}))})),this.state.camera=this.engine.create.camera(this.player.actor,this.world.world),this.state.cursor=this.engine.create.ui.cursor(100,100,1,25,16777215,null,this.state.camera),this.engine.addListeners("pointerup",(function(){})),function(e){var t=e.engine.create.addToLayer;e.engine.layers&&(t.characters([].concat(Object(o.a)(e.enemy),[e.player]),e.engine.layers.gameElements.characters),t.sprites(function(e){var t=[e.player.inventory.elements.container];e.player.inventory.elements.uiButton&&t.push(e.player.inventory.elements.uiButton);for(var a=0;a<t.length;a++)t[a].setDepth(a);return t}(e),e.engine.layers.ui))}(this)}},{key:"update",value:function(){this.player.move(this.state.cursor,this.world.world,q),this.engine.update.check.characterZIndex([this.player].concat(Object(o.a)(Object.values(this.enemy)))),function(e){for(var t=0,a=Object.entries(e.enemy);t<a.length;t++){var i=Object(y.a)(a[t],2);i[0],i[1].watching([e.player],q)}}(this),this.enemy.filter((function(e){return e.mortal.fight.health>=0}))}}]),a}(r.Scene),ne={type:Phaser.AUTO,parent:"game-box",width:480,height:480,scene:[ie],backgroundColor:1310779,physics:{default:"arcade",arcade:{}}},re=a(5),se=null,oe=function(){return Object(i.useLayoutEffect)((function(){se=new s.a.Game(ne)}),[]),Object(i.useEffect)((function(){return function(){var e;null===(e=se)||void 0===e||e.destroy(!0,!0)}}),[]),Object(re.jsx)("div",{children:Object(re.jsx)("div",{id:"game-box"})})};var ce=function(){return Object(re.jsx)("div",{className:"App",children:Object(re.jsx)(oe,{})})};a(25);Object(n.render)(Object(re.jsx)(ce,{}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.13e4c2c8.chunk.js.map