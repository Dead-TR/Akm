(this.webpackJsonpakm=this.webpackJsonpakm||[]).push([[0],{21:function(e,t,i){},24:function(e,t,i){},25:function(e,t,i){"use strict";i.r(t);var a=i(6),n=i(16),o=(i(21),i(10)),r=i.n(o),s=i(1),c=i(2),h=i(11),l=i(8),m=i(7),d=i(4),u=i(14),p=i(3),f=i(13),b=function(){function e(t,i,a,n,o,r){var c;(Object(s.a)(this,e),this.actor=void 0,this.scene=void 0,this.collision={top:{calc:-15,blocked:!1},bottom:{calc:15,blocked:!1},left:{calc:-15,blocked:!1},right:{calc:15,blocked:!1}},this.scene=t,this.actor=t.physics.add.sprite(i,a,n,o),r)&&(c=this.actor).setOrigin.apply(c,Object(f.a)(r))}return Object(c.a)(e,[{key:"checkCollision",value:function(e,t,i,a){for(var n=0,o=Object.entries(this.collision);n<o.length;n++){var r,s=Object(d.a)(o[n],2),c=s[0],h=s[1],l="top"===c||"bottom"===c?"y":"x",m=null===(r=i.getTileAtWorldXY("x"===l?e+h.calc:e,"y"===l?t+h.calc:t,!1))||void 0===r?void 0:r.index,u=a.indexOf(m||0);h.blocked=!u||-1!==u}}},{key:"createCollision",value:function(e){this.collision.right.blocked?e.direction.x>0&&(e.coordinates.x=this.actor.x):this.collision.left.blocked&&e.direction.x<0&&(e.coordinates.x=this.actor.x),this.collision.bottom.blocked?e.direction.y>0&&(e.coordinates.y=this.actor.y):this.collision.top.blocked&&e.direction.y<0&&(e.coordinates.y=this.actor.y)}},{key:"move",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=this.actor.x-e<-a?"right":this.actor.x-e>a?"left":"stop",o=this.actor.y-t<-a?"bottom":this.actor.y-t>a?"top":"stop";return"right"===n?this.actor.setVelocityX(i):"left"===n?this.actor.setVelocityX(-i):this.actor.setVelocityX(0),"bottom"===o?this.actor.setVelocityY(i):"top"===o?this.actor.setVelocityY(-i):this.actor.setVelocityY(0),[n,o]}}]),e}();function y(e,t,i,a,n,o){return new g(this,e,t,i,a,n,o)}var v,g=function(e){Object(l.a)(i,e);var t=Object(m.a)(i);function i(e,a,n,o,r,c,h){var l;return Object(s.a)(this,i),(l=t.call(this,e,a,n,o,r,null===h||void 0===h?void 0:h.origin)).scene=void 0,l.visionDistance=100,l.speed=100,l.animations=void 0,l.scene=e,l.visionDistance=(null===h||void 0===h?void 0:h.vision)||l.visionDistance,l.speed=(null===h||void 0===h?void 0:h.speed)||l.speed,l.animations={movement:c},l}return Object(c.a)(i,[{key:"watching",value:function(e,t){var a=this,n=void 0;if(n||(n=e.find((function(e){var t=Math.abs(e.x-a.actor.x),i=Math.abs(e.y-a.actor.y);if(t<a.visionDistance||i<a.visionDistance)return e}))),n){var o={direction:{x:n.x-this.actor.x,y:n.y-this.actor.y},coordinates:{x:n.x,y:n.y}};t&&(this.checkCollision(this.actor.x,this.actor.y,this.scene.world.world,t),this.createCollision(o));var r=Object(u.a)(Object(p.a)(i.prototype),"move",this).call(this,o.coordinates.x,o.coordinates.y,this.speed,25);if(this.animations.movement){var s,c=Object(d.a)(r,2),h=c[0],l=c[1],m=this.animations.movement;if("stop"!==h)this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(s=this.actor.anims.currentAnim)||void 0===s?void 0:s.key)!==m[h]&&this.actor.anims.play(m[h]);else if("stop"!==l){var f;this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(f=this.actor.anims.currentAnim)||void 0===f?void 0:f.key)!==m[l]&&this.actor.anims.play(m[l])}else{var b;this.actor.anims.pause(null===(b=this.actor.anims.currentAnim)||void 0===b?void 0:b.frames[1])}}}}}]),i}(b);function j(e,t,i,a,n){return new O(this,e,t,i,a,n)}!function(e){e.left="playerGoLeft",e.right="playerGoRight",e.top="playerGoUp",e.bottom="playerGoDown"}(v||(v={}));var O=function(e){Object(l.a)(i,e);var t=Object(m.a)(i);function i(e,a,n,o,r,c){var h;return Object(s.a)(this,i),(h=t.call(this,e,a,n,o,r,c)).scene=void 0,h.scene=e,h}return Object(c.a)(i,[{key:"move",value:function(e,t,a){this.checkCollision(this.actor.x,this.actor.y,t,a);var n={direction:{x:e.x-this.actor.x,y:e.y-this.actor.y},coordinates:{x:e.x,y:e.y}};this.createCollision(n);var o,r=Object(u.a)(Object(p.a)(i.prototype),"move",this).call(this,n.coordinates.x,n.coordinates.y,100,5),s=Object(d.a)(r,2),c=s[0],h=s[1];if("stop"!==c)this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(o=this.actor.anims.currentAnim)||void 0===o?void 0:o.key)!==v[c]&&this.actor.anims.play(v[c]);else if("stop"!==h){var l;this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(l=this.actor.anims.currentAnim)||void 0===l?void 0:l.key)!==v[h]&&this.actor.anims.play(v[h])}else{var m;this.actor.anims.pause(null===(m=this.actor.anims.currentAnim)||void 0===m?void 0:m.frames[1])}return r}}]),i}(b);function x(e,t,i,a){var n=this.make.tilemap({key:t,tileHeight:a,tileWidth:a}),o=e?n.addTilesetImage(i,void 0,a,a):null;return n.createStaticLayer(0,o,0,0)}var k=function(){function e(t,i,a,n,o){Object(s.a)(this,e),this.world=void 0,this.scene=void 0,this.objects=void 0,this.scene=t,this.world=x.call(t,i,a,n,o),this.objects={}}return Object(c.a)(e,[{key:"addSimpleObjects",value:function(e){var t=this;e.forEach((function(e){var i=e.x,a=e.y,n=e.imgName,o=e.name;t.objects[o]=t.scene.add.image(i,a,n)}))}}]),e}();function w(e,t,i,a){return new k(this,e,t,i,a)}function z(e){var t=this;e.forEach((function(e){var i=e.key,a=e.frame;t.anims.create({key:i,frames:t.anims.generateFrameNumbers(a.name,a.ways),frameRate:a.frameRate,repeat:a.repeat})}))}function D(e,t){var i=this.cameras.main;return i.setBounds(0,0,Number(t.width),Number(t.height)).startFollow(e,!0,1,1,0,0),i}function S(e,t,i,a,n,o,r){var s=this,c=this.add.circle(e,t,i,n);if(o){var h=o.color,l=o.size;c.setStrokeStyle(l,h)}var m=this.tweens.add({delay:.1,targets:c,scale:a,yoyo:!1,repeat:0,alpha:0,ease:"Sine.easeInOut"});return this.input.on("pointerdown",(function(){var e=0,t=0;r&&(e=r.scrollX,t=r.scrollY),c.x=s.input.x+e,c.y=s.input.y+t,m.restart()})),c}function A(e){var t=this;e.forEach((function(e){var i=e.method;e.data.forEach((function(e){var a;(a=t.load)[i].apply(a,Object(f.a)(e))}))}))}var G=function(){function e(t){Object(s.a)(this,e),this.scene=void 0,this.create=void 0,this.load=void 0,this.scene=t,this.create={world:w.bind(this.scene),player:j.bind(this.scene),enemy:y.bind(this.scene),animation:z.bind(this.scene),camera:D.bind(this.scene),ui:{cursor:S.bind(this.scene)}},this.load={preload:A.bind(this.scene),animation:z.bind(this.scene)}}return Object(c.a)(e,[{key:"addListeners",value:function(e,t){this.scene.input.on(e,t)}}]),e}(),L=i(0),R={ways:{start:0,end:3},frameRate:6,repeat:-1},U=[{key:"playerGoUp",frame:Object(L.a)(Object(L.a)({},R),{},{name:"playerUp"})},{key:"playerGoDown",frame:Object(L.a)(Object(L.a)({},R),{},{name:"playerDown"})},{key:"playerGoLeft",frame:Object(L.a)(Object(L.a)({},R),{},{name:"playerLeft"})},{key:"playerGoRight",frame:Object(L.a)(Object(L.a)({},R),{},{name:"playerRight"})},{key:"zombieU",frame:Object(L.a)(Object(L.a)({},R),{},{name:"zombieUp"})},{key:"zombieD",frame:Object(L.a)(Object(L.a)({},R),{},{name:"zombieDown"})},{key:"zombieL",frame:Object(L.a)(Object(L.a)({},R),{},{name:"zombieLeft"})},{key:"zombieR",frame:Object(L.a)(Object(L.a)({},R),{},{name:"zombieRight"})}],C=[0,2,3,4,5,7,8,9,10],E=[{name:"zombie",config:{x:300,y:300,spriteSheet:"zombieDown",textureFrame:1,origin:[.5,.8]},animations:{movement:{top:"zombieU",bottom:"zombieD",left:"zombieL",right:"zombieR"}}}];var F=[],_={frame:{frameWidth:20,frameHeight:45,startFrame:0,endFrame:3},path:"game/assets/img/DefaultScene/characters/player/"},H={frame:{frameWidth:20,frameHeight:45,startFrame:0,endFrame:3},path:"game/assets/img/DefaultScene/characters/enemies/zombie/"},V=[{method:"image",data:[["exampleGrassTile","game/assets/img/DefaultScene/grass.png"],["cursor","game/assets/img/general/cursor.png"],["empty","game/assets/img/general/emptyLayers.png"]]},{method:"tilemapCSV",data:[["exampleGrid","game/assets/grids/DefaultScene/grass.csv"]]},{method:"spritesheet",data:[["playerLeft","".concat(_.path,"p_left.png"),_.frame],["playerRight","".concat(_.path,"p_right.png"),_.frame],["playerDown","".concat(_.path,"p_down.png"),Object(L.a)(Object(L.a)({},_.frame),{},{frameHeight:44})],["playerUp","".concat(_.path,"p_up.png"),Object(L.a)(Object(L.a)({},_.frame),{},{frameHeight:44,frameWidth:19})],["zombieLeft","".concat(H.path,"p_left.png"),Object(L.a)(Object(L.a)({},H.frame),{},{frameHeight:41,frameWidth:22})],["zombieRight","".concat(H.path,"p_right.png"),Object(L.a)(Object(L.a)({},H.frame),{},{frameHeight:41,frameWidth:22})],["zombieUp","".concat(H.path,"p_up.png"),H.frame],["zombieDown","".concat(H.path,"p_down.png"),H.frame]]}],W=function(e){Object(l.a)(i,e);var t=Object(m.a)(i);function i(e){var a;return Object(s.a)(this,i),(a=t.call(this,e)).engine=void 0,a.player=void 0,a.world=void 0,a.enemy={},a.state=void 0,a.engine=new G(Object(h.a)(a)),a.state={},a}return Object(c.a)(i,[{key:"preload",value:function(){this.engine.load.preload(V)}},{key:"create",value:function(){var e;this.engine.load.animation(U),this.world=this.engine.create.world(!0,"exampleGrid","exampleGrassTile",32),this.world.addSimpleObjects(F),this.player=this.engine.create.player(64,64,"playerUp",1,[.5,.8]),e=this,E.forEach((function(t){var i=t.name,a=t.config,n=t.animations;e.enemy[i]=e.engine.create.enemy(a.x,a.y,a.spriteSheet,a.textureFrame,n.movement,{origin:a.origin,vision:50,speed:100})})),this.state.camera=this.engine.create.camera(this.player.actor,this.world.world),this.state.cursor=this.engine.create.ui.cursor(100,100,1,25,16777215,null,this.state.camera),this.engine.addListeners("pointerup",(function(){}))}},{key:"update",value:function(){this.player.move(this.state.cursor,this.world.world,C),function(e){for(var t=0,i=Object.entries(e.enemy);t<i.length;t++){var a=Object(d.a)(i[t],2);a[0],a[1].watching([e.player.actor],C)}}(this)}}]),i}(o.Scene),N={type:Phaser.AUTO,parent:"game-box",width:480,height:480,scene:[W],backgroundColor:1310779,physics:{default:"arcade",arcade:{}}},P=i(5),T=null,X=function(){return Object(a.useLayoutEffect)((function(){T=new r.a.Game(N)}),[]),Object(a.useEffect)((function(){return function(){var e;null===(e=T)||void 0===e||e.destroy(!0,!0)}}),[]),Object(P.jsx)("div",{children:Object(P.jsx)("div",{id:"game-box"})})};var Y=function(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(X,{})})};i(24);Object(n.render)(Object(P.jsx)(Y,{}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.a438437e.chunk.js.map