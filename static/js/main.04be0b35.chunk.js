(this.webpackJsonpakm=this.webpackJsonpakm||[]).push([[0],{21:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var i=a(5),o=a(16),r=(a(21),a(10)),n=a.n(r),s=a(1),c=a(2),l=a(11),h=a(7),m=a(6),d=a(14),p=a(3),u=a(9),f=a(13),b=function(){function e(t,a,i,o,r,n){var c;(Object(s.a)(this,e),this.actor=void 0,this.scene=void 0,this.params={health:100,armor:10,attack:10},this.mortal={isActive:!1,sword:null},this.collision={top:{calc:-15,blocked:!1},bottom:{calc:15,blocked:!1},left:{calc:-15,blocked:!1},right:{calc:15,blocked:!1}},this.scene=t,this.actor=t.physics.add.sprite(a,i,o,r),n)&&(c=this.actor).setOrigin.apply(c,Object(f.a)(n))}return Object(c.a)(e,[{key:"checkCollision",value:function(e,t,a,i){for(var o=0,r=Object.entries(this.collision);o<r.length;o++){var n,s=Object(u.a)(r[o],2),c=s[0],l=s[1],h="top"===c||"bottom"===c?"y":"x",m=null===(n=a.getTileAtWorldXY("x"===h?e+l.calc:e,"y"===h?t+l.calc:t,!1))||void 0===n?void 0:n.index,d=i.indexOf(m||0);l.blocked=!d||-1!==d}}},{key:"createCollision",value:function(e){this.collision.right.blocked?e.direction.x>0&&(e.coordinates.x=this.actor.x):this.collision.left.blocked&&e.direction.x<0&&(e.coordinates.x=this.actor.x),this.collision.bottom.blocked?e.direction.y>0&&(e.coordinates.y=this.actor.y):this.collision.top.blocked&&e.direction.y<0&&(e.coordinates.y=this.actor.y)}},{key:"move",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=this.actor.x-e<-i?"right":this.actor.x-e>i?"left":"stop",r=this.actor.y-t<-i?"bottom":this.actor.y-t>i?"top":"stop";return"right"===o?this.actor.setVelocityX(a):"left"===o?this.actor.setVelocityX(-a):this.actor.setVelocityX(0),"bottom"===r?this.actor.setVelocityY(a):"top"===r?this.actor.setVelocityY(-a):this.actor.setVelocityY(0),[o,r]}},{key:"movementAnimation",value:function(e,t){var a,i=Object(u.a)(e,2),o=i[0],r=i[1];if("stop"!==o)this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(a=this.actor.anims.currentAnim)||void 0===a?void 0:a.key)!==t[o]&&this.actor.anims.play(t[o]);else if("stop"!==r){var n;this.actor.anims.isPaused&&this.actor.anims.play(this.actor.anims.currentAnim),(null===(n=this.actor.anims.currentAnim)||void 0===n?void 0:n.key)!==t[r]&&this.actor.anims.play(t[r])}else{var s;this.actor.anims.pause(null===(s=this.actor.anims.currentAnim)||void 0===s?void 0:s.frames[1])}}}]),e}();function y(e,t,a,i,o,r){return new g(this,e,t,a,i,o,r)}var v,g=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e,i,o,r,n,c,l){var h;return Object(s.a)(this,a),(h=t.call(this,e,i,o,r,n,null===l||void 0===l?void 0:l.origin)).scene=void 0,h.visionDistance=100,h.speed=100,h.animations=void 0,h.scene=e,h.visionDistance=(null===l||void 0===l?void 0:l.vision)||h.visionDistance,h.speed=(null===l||void 0===l?void 0:l.speed)||h.speed,h.animations=c,(null===l||void 0===l?void 0:l.char)&&(h.params=l.char),h}return Object(c.a)(a,[{key:"watching",value:function(e,t){var i=this,o=void 0;if(o||(o=e.find((function(e){var t=Math.abs(e.x-i.actor.x),a=Math.abs(e.y-i.actor.y);if(t<i.visionDistance||a<i.visionDistance)return e}))),o){var r={direction:{x:o.x-this.actor.x,y:o.y-this.actor.y},coordinates:{x:o.x,y:o.y}};t&&(this.checkCollision(this.actor.x,this.actor.y,this.scene.world.world,t),this.createCollision(r));var n=Object(d.a)(Object(p.a)(a.prototype),"move",this).call(this,r.coordinates.x,r.coordinates.y,this.speed,15);if(this.animations.movement){var s=this.animations.movement;this.movementAnimation(n,s)}Math.abs(r.direction.x)<=16&&Math.abs(r.direction.y)<=16?this.mortal.isActive?this.mortal.sword&&(this.mortal.sword.x=this.actor.x,this.mortal.sword.y=this.actor.y):(this.mortal.isActive=!0,this.mortal.sword=this.scene.add.sprite(this.actor.x,this.actor.y,"").setOrigin(this.actor.originX,this.actor.originY),this.animations.sword&&this.mortal.sword.play(this.animations.sword)):(this.mortal.isActive&&(this.mortal.isActive=!1),this.mortal.sword&&(this.mortal.sword.destroy(),this.mortal.sword=null))}}}]),a}(b);function j(e,t,a,i,o){return new O(this,e,t,a,i,o)}!function(e){e.left="playerGoLeft",e.right="playerGoRight",e.top="playerGoUp",e.bottom="playerGoDown"}(v||(v={}));var O=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e,i,o,r,n,c){var l;return Object(s.a)(this,a),(l=t.call(this,e,i,o,r,n,c)).scene=void 0,l.scene=e,l}return Object(c.a)(a,[{key:"move",value:function(e,t,i){this.checkCollision(this.actor.x,this.actor.y,t,i);var o={direction:{x:e.x-this.actor.x,y:e.y-this.actor.y},coordinates:{x:e.x,y:e.y}};this.createCollision(o);var r=Object(d.a)(Object(p.a)(a.prototype),"move",this).call(this,o.coordinates.x,o.coordinates.y,100,5);return this.movementAnimation(r,v),r}}]),a}(b);function w(e,t,a,i){var o=this.make.tilemap({key:t,tileHeight:i,tileWidth:i}),r=e?o.addTilesetImage(a,void 0,i,i):null;return o.createStaticLayer(0,r,0,0)}var x=function(){function e(t,a,i,o,r){Object(s.a)(this,e),this.world=void 0,this.scene=void 0,this.objects=void 0,this.scene=t,this.world=w.call(t,a,i,o,r),this.objects={}}return Object(c.a)(e,[{key:"addSimpleObjects",value:function(e){var t=this;e.forEach((function(e){var a=e.x,i=e.y,o=e.imgName,r=e.name;t.objects[r]=t.scene.add.image(a,i,o)}))}}]),e}();function k(e,t,a,i){return new x(this,e,t,a,i)}function z(e){var t=this;e.forEach((function(e){var a=e.key,i=e.frame;t.anims.create({key:a,frames:t.anims.generateFrameNumbers(i.name,i.ways),frameRate:i.frameRate,repeat:i.repeat})}))}function D(e,t){var a=this.cameras.main;return a.setBounds(0,0,Number(t.width),Number(t.height)).startFollow(e,!0,1,1,0,0),a}function A(e,t,a,i,o,r,n){var s=this,c=this.add.circle(e,t,a,o);if(r){var l=r.color,h=r.size;c.setStrokeStyle(h,l)}var m=this.tweens.add({delay:.1,targets:c,scale:i,yoyo:!1,repeat:0,alpha:0,ease:"Sine.easeInOut"});return this.input.on("pointerdown",(function(){var e=0,t=0;n&&(e=n.scrollX,t=n.scrollY),c.x=s.input.x+e,c.y=s.input.y+t,m.restart()})),c}function S(e){var t=this;e.forEach((function(e){var a=e.method;e.data.forEach((function(e){var i;(i=t.load)[a].apply(i,Object(f.a)(e))}))}))}var G=function(){function e(t){Object(s.a)(this,e),this.scene=void 0,this.load=void 0,this.create=void 0,this.scene=t,this.load={preload:S.bind(this.scene),animation:z.bind(this.scene)},this.create={world:k.bind(this.scene),player:j.bind(this.scene),enemy:y.bind(this.scene),animation:z.bind(this.scene),camera:D.bind(this.scene),ui:{cursor:A.bind(this.scene)}}}return Object(c.a)(e,[{key:"addListeners",value:function(e,t){this.scene.input.on(e,t)}}]),e}(),L=a(0),_={ways:{start:0,end:3},frameRate:6,repeat:-1},F=[{key:"playerGoUp",frame:Object(L.a)(Object(L.a)({},_),{},{name:"playerUp"})},{key:"playerGoDown",frame:Object(L.a)(Object(L.a)({},_),{},{name:"playerDown"})},{key:"playerGoLeft",frame:Object(L.a)(Object(L.a)({},_),{},{name:"playerLeft"})},{key:"playerGoRight",frame:Object(L.a)(Object(L.a)({},_),{},{name:"playerRight"})},{key:"zombieU",frame:Object(L.a)(Object(L.a)({},_),{},{name:"zombieUp"})},{key:"zombieD",frame:Object(L.a)(Object(L.a)({},_),{},{name:"zombieDown"})},{key:"zombieL",frame:Object(L.a)(Object(L.a)({},_),{},{name:"zombieLeft"})},{key:"zombieR",frame:Object(L.a)(Object(L.a)({},_),{},{name:"zombieRight"})},{key:"clawsFight",frame:Object(L.a)(Object(L.a)({},{ways:{start:0,end:22},frameRate:15,repeat:-1}),{},{name:"claws"})}],R=[0,2,3,4,5,7,8,9,10],U=[{name:"zombie",config:{x:300,y:300,spriteSheet:"zombieDown",textureFrame:1,origin:[.5,.8]},animations:{movement:{top:"zombieU",bottom:"zombieD",left:"zombieL",right:"zombieR"},sword:"clawsFight"}}];var C=[],E={frame:{frameWidth:20,frameHeight:45,startFrame:0,endFrame:3},player:"game/assets/img/DefaultScene/characters/player/",zombie:"game/assets/img/DefaultScene/characters/enemies/zombie/"},H={path:"".concat("game/assets/img/DefaultScene/effects/","fight/"),claws:{name:"claws.png",frame:{frameWidth:80,frameHeight:80,startFrame:0,endFrame:22}},sword_1:{name:"sword_1.png",frame:{frameWidth:192,frameHeight:192,startFrame:0,endFrame:23}}},W=[{method:"image",data:[["exampleGrassTile","game/assets/img/DefaultScene/grass.png"],["cursor","game/assets/img/general/cursor.png"],["empty","game/assets/img/general/emptyLayers.png"]]},{method:"tilemapCSV",data:[["exampleGrid","game/assets/grids/DefaultScene/grass.csv"]]},{method:"spritesheet",data:[["playerLeft","".concat(E.player,"p_left.png"),E.frame],["playerRight","".concat(E.player,"p_right.png"),E.frame],["playerDown","".concat(E.player,"p_down.png"),Object(L.a)(Object(L.a)({},E.frame),{},{frameHeight:44})],["playerUp","".concat(E.player,"p_up.png"),Object(L.a)(Object(L.a)({},E.frame),{},{frameHeight:44,frameWidth:19})],["zombieLeft","".concat(E.zombie,"p_left.png"),Object(L.a)(Object(L.a)({},E.frame),{},{frameHeight:41,frameWidth:22})],["zombieRight","".concat(E.zombie,"p_right.png"),Object(L.a)(Object(L.a)({},E.frame),{},{frameHeight:41,frameWidth:22})],["zombieUp","".concat(E.zombie,"p_up.png"),E.frame],["zombieDown","".concat(E.zombie,"p_down.png"),E.frame],["claws","".concat(H.path).concat(H.claws.name),H.claws.frame],["sword_1","".concat(H.path).concat(H.sword_1.name),H.sword_1.frame]]}],V=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).engine=void 0,i.player=void 0,i.world=void 0,i.enemy={},i.state=void 0,i.engine=new G(Object(l.a)(i)),i.state={},i}return Object(c.a)(a,[{key:"preload",value:function(){this.engine.load.preload(W)}},{key:"create",value:function(){var e;this.engine.load.animation(F),this.world=this.engine.create.world(!0,"exampleGrid","exampleGrassTile",32),this.world.addSimpleObjects(C),this.player=this.engine.create.player(64,64,"playerUp",1,[.5,.8]),e=this,U.forEach((function(t){var a=t.name,i=t.config,o=t.animations;e.enemy[a]=e.engine.create.enemy(i.x,i.y,i.spriteSheet,i.textureFrame,o,{origin:i.origin,vision:50,speed:100})})),this.state.camera=this.engine.create.camera(this.player.actor,this.world.world),this.state.cursor=this.engine.create.ui.cursor(100,100,1,25,16777215,null,this.state.camera),this.engine.addListeners("pointerup",(function(){}))}},{key:"update",value:function(){this.player.move(this.state.cursor,this.world.world,R),function(e){for(var t=0,a=Object.entries(e.enemy);t<a.length;t++){var i=Object(u.a)(a[t],2);i[0],i[1].watching([e.player.actor],R)}}(this)}}]),a}(r.Scene),X={type:Phaser.AUTO,parent:"game-box",width:480,height:480,scene:[V],backgroundColor:1310779,physics:{default:"arcade",arcade:{}}},Y=a(4),N=null,T=function(){return Object(i.useLayoutEffect)((function(){N=new n.a.Game(X)}),[]),Object(i.useEffect)((function(){return function(){var e;null===(e=N)||void 0===e||e.destroy(!0,!0)}}),[]),Object(Y.jsx)("div",{children:Object(Y.jsx)("div",{id:"game-box"})})};var M=function(){return Object(Y.jsx)("div",{className:"App",children:Object(Y.jsx)(T,{})})};a(24);Object(o.render)(Object(Y.jsx)(M,{}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.04be0b35.chunk.js.map